---
import type { Package } from '@data/packages';

export interface Props {
  pkg: Package;
}

const { pkg } = Astro.props;
---

<article class={`card p-6 md:p-8 relative ${pkg.isPopular ? 'border-2 border-secondary' : ''}`}>
  {pkg.isPopular && (
    <div class="absolute -top-3 left-1/2 -translate-x-1/2">
      <span class="px-4 py-1 bg-secondary text-white text-sm font-semibold rounded-full shadow-md">
        ยอดนิยม
      </span>
    </div>
  )}

  <!-- Header -->
  <div class="text-center mb-6">
    <h3 class="text-xl font-bold text-primary mb-1">{pkg.name}</h3>
    <p class="text-xs text-gray-400 mb-3">{pkg.nameEn}</p>
    <p class="text-sm text-gray-500">{pkg.description}</p>
  </div>

  <!-- Price -->
  <div class="text-center py-4 mb-6 bg-bg rounded-xl">
    {pkg.isCustom ? (
      <div>
        <span class="text-2xl font-bold text-primary">ตามตกลง</span>
        <p class="text-sm text-gray-500 mt-1">ขึ้นอยู่กับเมนูที่เลือก</p>
      </div>
    ) : (
      <div>
        <span class="text-3xl font-bold text-primary">{pkg.pricePerPerson}</span>
        <span class="text-gray-500"> บาท/คน</span>
        <p class="text-sm text-gray-500 mt-1">
          ได้รับ {pkg.pieces} ชิ้น | สั่งขั้นต่ำ {pkg.minOrder} ชุด
        </p>
      </div>
    )}
  </div>

  <!-- Includes -->
  <div class="mb-6">
    <h4 class="font-semibold text-sm text-primary mb-3">รายการในชุด</h4>
    <ul class="space-y-2">
      {pkg.includes.map((item) => (
        <li class="flex items-start gap-2 text-sm text-gray-600">
          <svg class="w-5 h-5 text-secondary shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          {item}
        </li>
      ))}
    </ul>
  </div>

  <!-- Add-ons -->
  {pkg.addOns.length > 0 && (
    <div class="mb-6">
      <h4 class="font-semibold text-sm text-primary mb-3">เพิ่มเติมได้</h4>
      <div class="flex flex-wrap gap-2">
        {pkg.addOns.map((addon) => (
          <span class="px-3 py-1 bg-accent/20 text-primary text-xs rounded-full">
            {addon.name} +{addon.price}฿/{addon.unit}
          </span>
        ))}
      </div>
    </div>
  )}

  <!-- Lead time -->
  <div class="flex items-center gap-2 text-sm text-gray-500 mb-6">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    {pkg.leadTime}
  </div>

  <!-- CTAs -->
  <div class="flex flex-col gap-2">
    <a href="#contact" class={pkg.isPopular ? 'btn-secondary w-full text-center' : 'btn-primary w-full text-center'}>
      ขอใบเสนอราคา
    </a>
    <a
      href="https://line.me/ti/p/YOUR_LINE_ID"
      target="_blank"
      rel="noopener noreferrer"
      class="btn-outline w-full text-center flex items-center justify-center gap-2"
    >
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
      </svg>
      ทักไลน์
    </a>
  </div>
</article>
